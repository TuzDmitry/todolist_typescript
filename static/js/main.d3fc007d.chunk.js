(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{111:function(e,t,n){e.exports=n.p+"static/media/preloader.ee01809c.gif"},113:function(e,t,n){e.exports=n(238)},118:function(e,t,n){},238:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(48),i=n.n(o);n(118),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var c=n(9),s=n(8),l=n(53),u=n(6),d=n(49),p=n.n(d),m=p.a.create({withCredentials:!0,headers:{"API-KEY":"99d1b1eb-87ca-41b0-b4eb-5da7df0ab7de"},baseURL:"https://social-network.samuraijs.com/api/1.1/todo-lists/"}),f={getTodolists:function(){return m.get("")},createTodolist:function(e){return m.post("",{title:e})},deleteTodolist:function(e){return m.delete("".concat(e))},changeTodoTitle:function(e,t){return m.put("".concat(e),{title:t})},getTasks:function(e){return m.get("".concat(e,"/tasks"))},createTask:function(e,t){return m.post("".concat(e,"/tasks"),{title:t})},deleteTask:function(e,t){return m.delete("".concat(e,"/tasks/").concat(t))},changeTask:function(e,t){return m.put("".concat(e.todoListId,"/tasks/").concat(e.id),Object(u.a)({},e,{},t))}},h="TodoList/Reducer/ADD_TASK",T={todolists:[],isPreloaderTodo:!1,isPreloaderTasks:!1},b=function(e){return{type:"TodoList/Reducer/CHANGE_PRELOADER_TODO",isPreloader:e}},E=function(e){return{type:"TodoList/Reducer/CHANGE_PRELOADER_TASKS",isPreloader:e}},g=n(108),k=n(28),v=n.n(k),O=n(51),y=p.a.create({withCredentials:!0,headers:{"API-KEY":"99d1b1eb-87ca-41b0-b4eb-5da7df0ab7de"},baseURL:"https://social-network.samuraijs.com/api/1.1/"}),C=function(){return y.get("auth/me").then(function(e){return e.data})},j=function(e){return y.post("auth/login",Object(u.a)({},e)).then(function(e){return e.data})},A=function(){return y.delete("auth/login").then(function(e){return e.data})},S="TODOLIST_TS/AuthReducer/AUTH_FAIL",L={userId:null,login:null,email:null,isAuth:!1},w=function(){return{type:S}},I=function(){return function(){var e=Object(O.a)(v.a.mark(function e(t){var n;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C();case 3:0===(n=e.sent).resultCode?t({type:"TODOLIST_TS/AuthReducer/AUTH_SUCCESS",email:(a=n.data).email,login:a.login,userId:a.userId}):t(w()),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),alert(e.t0);case 10:case"end":return e.stop()}var a},e,null,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()},P=n(241),x=Object(s.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TODOLIST_TS/AuthReducer/AUTH_SUCCESS":return Object(u.a)({},e,{email:t.email,login:t.login,userId:t.userId,isAuth:!0});case S:return Object(u.a)({},e,{email:null,login:null,userId:null,isAuth:!1});default:return e}},todoPage:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"SET_TODOLISTS":return Object(u.a)({},t,{todolists:n.todolists});case"TodoList/Reducer/ADD_TODOLIST":return e=[n.newTodolistName].concat(Object(l.a)(t.todolists)),Object(u.a)({},t,{todolists:e});case"TodoList/Reducer/DELETE-TODOLIST":var a=t.todolists.filter(function(e){return e.id!==n.todolistId});return a=a.map(function(e){return Object(u.a)({},e)}),Object(u.a)({},t,{todolists:a});case"TodoList/Reducer/CHANGE_TODOLIST":return e=t.todolists.map(function(e){return e.id!==n.todolistId?e:Object(u.a)({},e,{title:n.title})}),Object(u.a)({},t,{todolists:e});case"SET_TASKS":return Object(u.a)({},t,{todolists:t.todolists.map(function(e){return e.id!==n.todoListId?e:Object(u.a)({},e,{tasks:n.tasks})})});case h:return e=t.todolists.map(function(e){return e.id!==n.todolistId?e:Object(u.a)({},e,{tasks:[n.newTask].concat(Object(l.a)(e.tasks))})}),Object(u.a)({},t,{todolists:e});case"TodoList/Reducer/DELETE-TASK":return e=t.todolists.map(function(e){if(e.id!==n.todolistId)return e;var t=Object(l.a)(e.tasks.filter(function(e){return e.id!==n.taskId}));return Object(u.a)({},e,{tasks:t})}),Object(u.a)({},t,{todolists:e});case"TodoList/Reducer/CHANGE_TASK":return e=t.todolists.map(function(e){return e.id!==n.task.todoListId?e:Object(u.a)({},e,{tasks:e.tasks.map(function(e){return e.id!==n.task.id?e:Object(u.a)({},n.task)})})}),Object(u.a)({},t,{todolists:e});case"TodoList/Reducer/CHANGE_PRELOADER_TODO":return Object(u.a)({},t,{isPreloaderTodo:n.isPreloader});case"TodoList/Reducer/CHANGE_PRELOADER_TASKS":return Object(u.a)({},t,{isPreloaderTasks:n.isPreloader});default:return t}},form:P.a}),D=Object(s.d)(x,Object(s.a)(g.a)),N=n(31),R=n(10),_=n(12),M=n(11),F=n(13),H=(n(68),function(){var e=Object(c.d)(function(e){return e.auth.isAuth}),t=Object(c.d)(function(e){return e.auth.login}),n=Object(c.c)();return r.a.createElement("div",{style:{boxSizing:"border-box",padding:"10px",backgroundColor:"rgba(29, 32, 38, 0.87)",height:"80px",borderTopLeftRadius:"15px",border:"1px solid black"}},r.a.createElement("div",{style:{float:"right",padding:"15px",color:"white"}},e?r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{style:{marginRight:"10px"}},t),r.a.createElement("button",{onClick:function(){n(function(){var e=Object(O.a)(v.a.mark(function e(t){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,A();case 3:0===e.sent.resultCode&&t(w()),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),alert(e.t0);case 10:case"end":return e.stop()}},e,null,[[0,7]])}));return function(t){return e.apply(this,arguments)}}())}},"LOGOUT")):r.a.createElement(N.b,{to:"/login"},"LOGIN")))}),K=n(7),G=n(240),U=n(239),V=n(74),B=function(e){e.input;var t=e.meta,n=(e.child,Object(V.a)(e,["input","meta","child"])),a=t.touched&&t.error,o=a?"wrapInp error":"wrapInp",i={color:a?"red":"black"};return r.a.createElement("div",{className:"".concat(o)},n.children,a&&r.a.createElement("div",{style:i},t.error))},z=function(e){var t=e.input,n=(e.meta,Object(V.a)(e,["input","meta"]));return r.a.createElement(B,e,r.a.createElement("input",Object.assign({},t,n)))},Z=function(e){return e?void 0:"line is required"},J=function(e){return function(t){return t&&t.length>e?"Must be ".concat(e," characters or less"):void 0}},W=(J(10),J(25)),Y=function(e){return e&&!/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e)?"Invalid email address":void 0},$=Object(U.a)({form:"login"})(function(e){return r.a.createElement("form",{onSubmit:e.handleSubmit},r.a.createElement("div",{style:{boxSizing:"border-box",padding:"15px",color:"white",backgroundColor:"#333",marginBottom:"15px",borderRadius:"5px"}},r.a.createElement("div",null,r.a.createElement("i",null,"\u0434\u0430\u043d\u043d\u044b\u0435 \u0442\u0435\u0441\u0442\u043e\u0432\u043e\u0433\u043e \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u0430:")),r.a.createElement("div",null,"Email: ",r.a.createElement("ins",null,"free@samuraijs.com")),r.a.createElement("div",null,"Password: ",r.a.createElement("ins",null,"free"))),r.a.createElement("div",null,r.a.createElement(G.a,{type:"text",placeholder:"email",component:z,name:"email",validate:[Z,Y,W]})),r.a.createElement("div",null,r.a.createElement(G.a,{type:"text",placeholder:"password",component:z,name:"password",validate:[Z]})),r.a.createElement("div",null,r.a.createElement(G.a,{type:"checkbox",id:"styled-checkbox-1",component:"input",name:"rememberMe"}),r.a.createElement("label",{htmlFor:"styled-checkbox-1"},"remember me")),r.a.createElement("button",{className:"butt"},"Login"))}),q=function(){var e=Object(c.c)();return Object(c.d)(function(e){return e.auth.isAuth})?r.a.createElement(K.a,{to:"/"}):r.a.createElement($,{onSubmit:function(t){e(function(e){return function(){var t=Object(O.a)(v.a.mark(function t(n){return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,j(e);case 3:0===t.sent.resultCode&&n(I()),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),alert(t.t0);case 10:case"end":return t.stop()}},t,null,[[0,7]])}));return function(e){return t.apply(this,arguments)}}()}(t))}})},Q=n(110),X=function(e){function t(){var e,n;Object(R.a)(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(n=Object(_.a)(this,(e=Object(M.a)(t)).call.apply(e,[this].concat(o)))).state={error:!0,title:""},n.onAddItemClick=function(){var e=n.state.title;n.setState({title:""}),""===e?n.setState({error:!0}):(n.setState({error:!1}),n.props.addItem(e))},n.onTitleChanged=function(e){n.setState({error:!1,title:e.currentTarget.value})},n.onKeyPress=function(e){"Enter"===e.key&&n.onAddItemClick()},n.render=function(){var e=n.state.error?"error":"";return r.a.createElement("div",{className:"todoList-newTaskForm"},r.a.createElement("input",{type:"text",className:e,onChange:n.onTitleChanged,value:n.state.title,onKeyPress:n.onKeyPress,placeholder:"New item name"}),r.a.createElement("button",{onClick:n.onAddItemClick},"Add"))},n}return Object(F.a)(t,e),t}(r.a.Component),ee=function(e){function t(){var e,n;Object(R.a)(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(n=Object(_.a)(this,(e=Object(M.a)(t)).call.apply(e,[this].concat(o)))).state={editMode:!1,memoryTitle:"",editPriorityMode:!1},n.onIsDoneChanged=function(e){var t=e.currentTarget.checked?2:0;n.props.changeStatus(n.props.task,t)},n.onTitleChanged=function(e){n.setState({memoryTitle:e.currentTarget.value})},n.onClickClose=function(){n.props.deleteTask(n.props.task.id)},n.activateEditMode=function(){n.setState({editMode:!0,memoryTitle:n.props.task.title})},n.deActivateEditMode=function(){n.props.changeTitle(n.props.task,n.state.memoryTitle),n.setState({editMode:!1})},n.onPriorityChanged=function(e){var t=e.currentTarget.value;n.props.changePriority(n.props.task,t)},n.render=function(){var e,t=n.props.task.status,a=2===t?"done":"todoList-task";switch(n.props.task.priority){case 0:e="low";break;case 1:e="middle";break;case 2:e="hi";break;case 3:e="urgently";break;case 4:e="later";break;default:e="smth strange"}return r.a.createElement("div",null,r.a.createElement("div",{className:"taskContainer"},r.a.createElement("div",{className:a},r.a.createElement("span",null,n.props.task.id.slice(0,4)),r.a.createElement("input",{type:"checkbox",onChange:n.onIsDoneChanged,checked:2===t}),n.state.editMode?r.a.createElement("input",{onBlur:n.deActivateEditMode,onChange:n.onTitleChanged,value:n.state.memoryTitle,autoFocus:!0}):r.a.createElement("span",{onClick:n.activateEditMode},"-",n.props.task.title,", "),r.a.createElement("span",null,"priority:",n.state.editPriorityMode?r.a.createElement("select",{autoFocus:!0,value:n.props.task.priority,size:1,onBlur:function(){return n.setState({editPriorityMode:!1})},onChange:n.onPriorityChanged},r.a.createElement("option",{value:0},"low"),r.a.createElement("option",{value:1},"middle"),r.a.createElement("option",{value:2},"hi"),r.a.createElement("option",{value:3},"urgently"),r.a.createElement("option",{value:4},"later")):r.a.createElement("span",{onClick:function(){return n.setState({editPriorityMode:!0})}},e))),r.a.createElement("button",{className:"deleterTask",onClick:n.onClickClose},"x")))},n}return Object(F.a)(t,e),t}(r.a.Component),te=function(e){function t(){var e,n;Object(R.a)(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(n=Object(_.a)(this,(e=Object(M.a)(t)).call.apply(e,[this].concat(o)))).render=function(){var e=n.props.tasks.map(function(e){return r.a.createElement(ee,{key:e.id,deleteTask:n.props.deleteTask,changeTitle:n.props.changeTitle,changeStatus:n.props.changeStatus,changePriority:n.props.changePriority,task:e})});return r.a.createElement("div",{className:"todoList-tasks"},e)},n}return Object(F.a)(t,e),t}(r.a.Component),ne=function(e){function t(){var e,n;Object(R.a)(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(n=Object(_.a)(this,(e=Object(M.a)(t)).call.apply(e,[this].concat(o)))).state={isHidden:!1},n.onAllFilterClick=function(){n.props.changeFilter("All")},n.onCompletedFilterClick=function(){n.props.changeFilter("Completed")},n.onActiveFilterClick=function(){n.props.changeFilter("Active")},n.onShowFiltersClick=function(){n.setState({isHidden:!1})},n.onHideFiltersClick=function(){n.setState({isHidden:!0})},n.render=function(){var e="All"===n.props.filterValue?"filter-active":"",t="Completed"===n.props.filterValue?"filter-active":"",a="Active"===n.props.filterValue?"filter-active":"";return r.a.createElement("div",{className:""},r.a.createElement("div",{className:"todoList-footer"},!n.state.isHidden&&r.a.createElement("span",{onClick:n.onHideFiltersClick},"hide"),n.state.isHidden&&r.a.createElement("span",{onClick:n.onShowFiltersClick},"show"),!n.state.isHidden&&r.a.createElement("div",null,r.a.createElement("button",{onClick:n.onAllFilterClick,className:e},"All"),r.a.createElement("button",{onClick:n.onCompletedFilterClick,className:t},"Completed"),r.a.createElement("button",{onClick:n.onActiveFilterClick,className:a},"Active"))))},n}return Object(F.a)(t,e),t}(r.a.Component),ae=function(e){function t(){var e,n;Object(R.a)(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(n=Object(_.a)(this,(e=Object(M.a)(t)).call.apply(e,[this].concat(o)))).state={editMode:!1,memoryTitle:"",editPriorityMode:!1},n.activateEditMode=function(){n.setState({editMode:!0,memoryTitle:n.props.title})},n.deActivateEditMode=function(){n.props.changeTodoTitle(n.props.id,n.state.memoryTitle),n.setState({editMode:!1})},n.onTitleChanged=function(e){n.setState({memoryTitle:e.currentTarget.value})},n.render=function(){return r.a.createElement(r.a.Fragment,null,n.state.editMode?r.a.createElement("input",{onBlur:n.deActivateEditMode,onChange:n.onTitleChanged,value:n.state.memoryTitle,autoFocus:!0}):r.a.createElement("h3",{onClick:n.activateEditMode,className:"todoList-header__title"},n.props.title))},n}return Object(F.a)(t,e),t}(r.a.Component),re=n(111),oe=n.n(re),ie=function(e){return r.a.createElement(r.a.Fragment,null,e.isPreloader&&r.a.createElement("div",null,r.a.createElement("img",{src:oe.a,alt:""})))},ce=function(e){function t(){var e,n;Object(R.a)(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(n=Object(_.a)(this,(e=Object(M.a)(t)).call.apply(e,[this].concat(o)))).restoreState=function(){n.props.getTasks(n.props.id)},n.state={tasks:[],filterValue:"All"},n.deleteTodolist=function(){n.props.deleteTodolist(n.props.id)},n.changeTodoTitle=function(e,t){n.props.changeTodolist(e,t)},n.addTask=function(e){n.props.addTask(n.props.id,e)},n.deleteTask=function(e){n.props.deleteTask(n.props.id,e)},n.changeFilter=function(e){n.setState({filterValue:e})},n.changeTask=function(e,t){n.props.changeTask(e,t)},n.changeStatus=function(e,t){n.changeTask(e,{status:t})},n.changeTitle=function(e,t){n.changeTask(e,{title:t})},n.changePriority=function(e,t){n.changeTask(e,{priority:t})},n.render=function(){var e=n.props.tasks,t=void 0===e?[]:e;return r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"todoList"},r.a.createElement("div",{className:"todoList-header"},r.a.createElement(ae,{title:n.props.title,id:n.props.id,changeTodoTitle:n.changeTodoTitle}),r.a.createElement("div",null,r.a.createElement("span",{className:"idTodo"},"# ".concat(n.props.id.slice(0,4))),r.a.createElement("button",{className:"deleterTodo",onClick:n.deleteTodolist},"x")),r.a.createElement(X,{addItem:n.addTask})),r.a.createElement(ie,{isPreloader:n.props.isPreloaderTasks}),r.a.createElement(te,{deleteTask:n.deleteTask,changeTitle:n.changeTitle,changeStatus:n.changeStatus,changePriority:n.changePriority,tasks:t.filter(function(e){switch(n.state.filterValue){case"All":return!0;case"Completed":return 2===e.status;case"Active":return 0===e.status;default:return!0}})}),r.a.createElement(ne,{changeFilter:n.changeFilter,filterValue:n.state.filterValue})))},n}return Object(F.a)(t,e),Object(Q.a)(t,[{key:"componentDidMount",value:function(){this.restoreState()}}]),t}(r.a.Component),se=Object(c.b)(function(e){return{isPreloaderTasks:e.todoPage.isPreloaderTasks}},{deleteTodolist:function(e){return function(t){f.deleteTodolist(e).then(function(n){0===n.data.resultCode&&t({type:"TodoList/Reducer/DELETE-TODOLIST",todolistId:e})})}},changeTodolist:function(e,t){return function(n){f.changeTodoTitle(e,t).then(function(a){0===a.data.resultCode&&n(function(e,t){return{type:"TodoList/Reducer/CHANGE_TODOLIST",todolistId:e,title:t}}(e,t))})}},getTasks:function(e){return function(t){t(E(!0)),f.getTasks(e).then(function(n){console.log(n),n.data.error||(t(function(e,t){return{type:"SET_TASKS",tasks:e,todoListId:t}}(n.data.items,e)),t(E(!1)))})}},addTask:function(e,t){return function(n){f.createTask(e,t).then(function(t){if(0===t.data.resultCode){var a=t.data.data.item;n(function(e,t){return{type:h,todolistId:e,newTask:t}}(e,a))}})}},deleteTask:function(e,t){return function(n){f.deleteTask(e,t).then(function(a){0===a.data.resultCode&&n(function(e,t){return{type:"TodoList/Reducer/DELETE-TASK",todolistId:e,taskId:t}}(e,t))})}},changeTask:function(e,t){return function(n){f.changeTask(e,t).then(function(e){0===e.data.resultCode&&n({type:"TodoList/Reducer/CHANGE_TASK",task:e.data.data.item})})}}})(ce),le=function(e){function t(){var e,n;Object(R.a)(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(n=Object(_.a)(this,(e=Object(M.a)(t)).call.apply(e,[this].concat(o)))).componentDidMount=function(){n.restoreState()},n.restoreState=function(){n.props.getTodolists()},n.addTodoList=function(e){n.props.addTodoList(e)},n.render=function(){var e=n.props.todolists.map(function(e){return r.a.createElement(se,{key:e.id,id:e.id,title:e.title,tasks:e.tasks})});return r.a.createElement("div",null,r.a.createElement(ie,{isPreloader:n.props.isPreloaderTodo}),r.a.createElement("div",null,r.a.createElement(X,{addItem:n.addTodoList})),r.a.createElement("div",{className:"App"},e))},n}return Object(F.a)(t,e),t}(r.a.Component),ue=Object(c.b)(function(e){return{todolists:e.todoPage.todolists,isPreloaderTodo:e.todoPage.isPreloaderTodo,isAuth:e.auth.isAuth}},{addTodoList:function(e){return function(t){f.createTodolist(e).then(function(e){0===e.data.resultCode&&t({type:"TodoList/Reducer/ADD_TODOLIST",newTodolistName:e.data.data.item})})}},getTodolists:function(){return function(e){e(b(!0)),f.getTodolists().then(function(t){e({type:"SET_TODOLISTS",todolists:t.data}),e(b(!1))})}}})(le),de=function(e){function t(){var e,n;Object(R.a)(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(n=Object(_.a)(this,(e=Object(M.a)(t)).call.apply(e,[this].concat(o)))).componentDidMount=function(){n.props.Autorization()},n.render=function(){return r.a.createElement("div",{style:{backgroundImage:"url(https://ismile-service.ru/images/bg20.jpg)"}},r.a.createElement(H,null),r.a.createElement("div",{style:{minHeight:"80vh"}},r.a.createElement(K.b,{path:"/login",component:q}),r.a.createElement(K.b,{path:"/",render:function(){return n.props.isAuth?r.a.createElement(ue,null):r.a.createElement(K.a,{to:"/login"})}})))},n}return Object(F.a)(t,e),t}(r.a.Component),pe=Object(c.b)(function(e){return{isAuth:e.auth.isAuth}},{Autorization:I})(de);i.a.render(r.a.createElement(c.a,{store:D},r.a.createElement(N.a,null,r.a.createElement(pe,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},68:function(e,t,n){}},[[113,1,2]]]);
//# sourceMappingURL=main.d3fc007d.chunk.js.map