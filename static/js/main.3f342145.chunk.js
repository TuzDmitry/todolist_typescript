(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{111:function(e,t,a){e.exports=a.p+"static/media/preloader.ee01809c.gif"},113:function(e,t,a){e.exports=a(238)},118:function(e,t,a){},238:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(48),i=a.n(o);a(118),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var c=a(9),s=a(8),l=a(53),d=a(6),u=a(49),p=a.n(u),m=p.a.create({withCredentials:!0,headers:{"API-KEY":"99d1b1eb-87ca-41b0-b4eb-5da7df0ab7de"},baseURL:"https://social-network.samuraijs.com/api/1.1/todo-lists/"}),f={getTodolists:function(){return m.get("")},createTodolist:function(e){return m.post("",{title:e})},deleteTodolist:function(e){return m.delete("".concat(e))},changeTodoTitle:function(e,t){return m.put("".concat(e),{title:t})},getTasks:function(e){return m.get("".concat(e,"/tasks"))},createTask:function(e,t){return m.post("".concat(e,"/tasks"),{title:t})},deleteTask:function(e,t){return m.delete("".concat(e,"/tasks/").concat(t))},changeTask:function(e,t){return m.put("".concat(e.todoListId,"/tasks/").concat(e.id),Object(d.a)({},e,{},t))}},h="TodoList/Reducer/ADD_TASK",T={todolists:[],isPreloaderTodo:!1,isPreloaderTasks:!1},b=function(e){return{type:"TodoList/Reducer/CHANGE_PRELOADER_TODO",isPreloader:e}},E=function(e){return{type:"TodoList/Reducer/CHANGE_PRELOADER_TASKS",isPreloader:e}},g=a(108),k=a(28),v=a.n(k),O=a(51),y=p.a.create({withCredentials:!0,headers:{"API-KEY":"99d1b1eb-87ca-41b0-b4eb-5da7df0ab7de"},baseURL:"https://social-network.samuraijs.com/api/1.1/"}),C=function(){return y.get("auth/me").then(function(e){return e.data})},j=function(e){return y.post("auth/login",Object(d.a)({},e)).then(function(e){return e.data})},A=function(){return y.delete("auth/login").then(function(e){return e.data})},S="TODOLIST_TS/AuthReducer/AUTH_FAIL",L={userId:null,login:null,email:null,isAuth:!1},w=function(){return{type:S}},I=function(){return function(){var e=Object(O.a)(v.a.mark(function e(t){var a;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C();case 3:0===(a=e.sent).resultCode?t({type:"TODOLIST_TS/AuthReducer/AUTH_SUCCESS",email:(n=a.data).email,login:n.login,userId:n.userId}):t(w()),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),alert(e.t0);case 10:case"end":return e.stop()}var n},e,null,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()},P=a(241),x=Object(s.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TODOLIST_TS/AuthReducer/AUTH_SUCCESS":return Object(d.a)({},e,{email:t.email,login:t.login,userId:t.userId,isAuth:!0});case S:return Object(d.a)({},e,{email:null,login:null,userId:null,isAuth:!1});default:return e}},todoPage:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"SET_TODOLISTS":return Object(d.a)({},t,{todolists:a.todolists});case"TodoList/Reducer/ADD_TODOLIST":return e=[a.newTodolistName].concat(Object(l.a)(t.todolists)),Object(d.a)({},t,{todolists:e});case"TodoList/Reducer/DELETE-TODOLIST":var n=t.todolists.filter(function(e){return e.id!==a.todolistId});return n=n.map(function(e){return Object(d.a)({},e)}),Object(d.a)({},t,{todolists:n});case"TodoList/Reducer/CHANGE_TODOLIST":return e=t.todolists.map(function(e){return e.id!==a.todolistId?e:Object(d.a)({},e,{title:a.title})}),Object(d.a)({},t,{todolists:e});case"SET_TASKS":return Object(d.a)({},t,{todolists:t.todolists.map(function(e){return e.id!==a.todoListId?e:Object(d.a)({},e,{tasks:a.tasks})})});case h:return e=t.todolists.map(function(e){return e.id!==a.todolistId?e:Object(d.a)({},e,{tasks:[a.newTask].concat(Object(l.a)(e.tasks))})}),Object(d.a)({},t,{todolists:e});case"TodoList/Reducer/DELETE-TASK":return e=t.todolists.map(function(e){if(e.id!==a.todolistId)return e;var t=Object(l.a)(e.tasks.filter(function(e){return e.id!==a.taskId}));return Object(d.a)({},e,{tasks:t})}),Object(d.a)({},t,{todolists:e});case"TodoList/Reducer/CHANGE_TASK":return e=t.todolists.map(function(e){return e.id!==a.task.todoListId?e:Object(d.a)({},e,{tasks:e.tasks.map(function(e){return e.id!==a.task.id?e:Object(d.a)({},a.task)})})}),Object(d.a)({},t,{todolists:e});case"TodoList/Reducer/CHANGE_PRELOADER_TODO":return Object(d.a)({},t,{isPreloaderTodo:a.isPreloader});case"TodoList/Reducer/CHANGE_PRELOADER_TASKS":return Object(d.a)({},t,{isPreloaderTasks:a.isPreloader});default:return t}},form:P.a}),D=Object(s.d)(x,Object(s.a)(g.a)),N=a(31),R=a(10),_=a(12),M=a(11),F=a(13),H=(a(68),function(){var e=Object(c.d)(function(e){return e.auth.isAuth}),t=Object(c.d)(function(e){return e.auth.login}),a=Object(c.c)();return r.a.createElement("div",{style:{boxSizing:"border-box",padding:"10px",backgroundColor:"rgba(29, 32, 38, 0.87)",height:"80px",borderTopLeftRadius:"15px",border:"1px solid black"}},r.a.createElement("div",{style:{float:"right",padding:"15px",color:"white"}},e?r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{style:{marginRight:"10px"}},t),r.a.createElement("button",{onClick:function(){a(function(){var e=Object(O.a)(v.a.mark(function e(t){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,A();case 3:0===e.sent.resultCode&&t(w()),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),alert(e.t0);case 10:case"end":return e.stop()}},e,null,[[0,7]])}));return function(t){return e.apply(this,arguments)}}())}},"LOGOUT")):r.a.createElement(N.b,{to:"/login"},"LOGIN")))}),K=a(7),G=a(240),U=a(239),V=a(74),B=function(e){e.input;var t=e.meta,a=(e.child,Object(V.a)(e,["input","meta","child"])),n=t.touched&&t.error,o=n?"wrapInp error":"wrapInp",i={color:n?"red":"black"};return r.a.createElement("div",{className:"".concat(o)},a.children,n&&r.a.createElement("div",{style:i},t.error))},z=function(e){var t=e.input,a=(e.meta,Object(V.a)(e,["input","meta"]));return r.a.createElement(B,e,r.a.createElement("input",Object.assign({},t,a)))},Z=function(e){return e?void 0:"line is required"},J=function(e){return function(t){return t&&t.length>e?"Must be ".concat(e," characters or less"):void 0}},W=(J(10),J(25)),Y=function(e){return e&&!/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e)?"Invalid email address":void 0},$=Object(U.a)({form:"login"})(function(e){return r.a.createElement("form",{onSubmit:e.handleSubmit},r.a.createElement("div",{style:{boxSizing:"border-box",padding:"15px",color:"white",backgroundColor:"#333",marginBottom:"15px",borderRadius:"5px"}},r.a.createElement("div",null,r.a.createElement("i",null,"\u0434\u0430\u043d\u043d\u044b\u0435 \u0442\u0435\u0441\u0442\u043e\u0432\u043e\u0433\u043e \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u0430:")),r.a.createElement("div",null,"Email: ",r.a.createElement("ins",null,"free@samuraijs.com")),r.a.createElement("div",null,"Password: ",r.a.createElement("ins",null,"free"))),r.a.createElement("div",null,r.a.createElement(G.a,{type:"text",placeholder:"email",component:z,name:"email",validate:[Z,Y,W]})),r.a.createElement("div",null,r.a.createElement(G.a,{type:"text",placeholder:"password",component:z,name:"password",validate:[Z]})),r.a.createElement("div",null,r.a.createElement(G.a,{type:"checkbox",id:"styled-checkbox-1",component:"input",name:"rememberMe"}),r.a.createElement("label",{htmlFor:"styled-checkbox-1"},"remember me")),r.a.createElement("button",{className:"butt"},"Login"))}),q=function(){var e=Object(c.c)();return Object(c.d)(function(e){return e.auth.isAuth})?r.a.createElement(K.a,{to:"/"}):r.a.createElement($,{onSubmit:function(t){e(function(e){return function(){var t=Object(O.a)(v.a.mark(function t(a){return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,j(e);case 3:0===t.sent.resultCode&&a(I()),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),alert(t.t0);case 10:case"end":return t.stop()}},t,null,[[0,7]])}));return function(e){return t.apply(this,arguments)}}()}(t))}})},Q=a(110),X=function(e){function t(){var e,a;Object(R.a)(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(a=Object(_.a)(this,(e=Object(M.a)(t)).call.apply(e,[this].concat(o)))).state={error:!0,title:""},a.onAddItemClick=function(){var e=a.state.title;a.setState({title:""}),""===e?a.setState({error:!0}):(a.setState({error:!1}),a.props.addItem(e))},a.onTitleChanged=function(e){a.setState({error:!1,title:e.currentTarget.value})},a.onKeyPress=function(e){"Enter"===e.key&&a.onAddItemClick()},a.render=function(){var e=a.state.error?"error":"";return r.a.createElement("div",{className:"todoList-newTaskForm"},r.a.createElement("input",{type:"text",className:e,onChange:a.onTitleChanged,value:a.state.title,onKeyPress:a.onKeyPress,placeholder:"New item name"}),r.a.createElement("button",{onClick:a.onAddItemClick},"Add"))},a}return Object(F.a)(t,e),t}(r.a.Component),ee=function(e){function t(){var e,a;Object(R.a)(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(a=Object(_.a)(this,(e=Object(M.a)(t)).call.apply(e,[this].concat(o)))).state={editMode:!1,memoryTitle:"",editPriorityMode:!1},a.onIsDoneChanged=function(e){var t=e.currentTarget.checked?2:0;a.props.changeStatus(a.props.task,t)},a.onTitleChanged=function(e){a.setState({memoryTitle:e.currentTarget.value})},a.onClickClose=function(){a.props.deleteTask(a.props.task.id)},a.activateEditMode=function(){a.setState({editMode:!0,memoryTitle:a.props.task.title})},a.deActivateEditMode=function(){a.props.changeTitle(a.props.task,a.state.memoryTitle),a.setState({editMode:!1})},a.onPriorityChanged=function(e){var t=e.currentTarget.value;a.props.changePriority(a.props.task,t)},a.render=function(){var e,t=a.props.task.status,n=2===t?"done":"todoList-task";switch(a.props.task.priority){case 0:e="low";break;case 1:e="middle";break;case 2:e="hi";break;case 3:e="urgently";break;case 4:e="later";break;default:e="smth strange"}return r.a.createElement("div",null,r.a.createElement("div",{className:"taskContainer"},r.a.createElement("div",{className:n},r.a.createElement("span",null,a.props.task.id.slice(0,4)),r.a.createElement("input",{type:"checkbox",onChange:a.onIsDoneChanged,checked:2===t}),a.state.editMode?r.a.createElement("input",{onBlur:a.deActivateEditMode,onChange:a.onTitleChanged,value:a.state.memoryTitle,autoFocus:!0}):r.a.createElement("span",{onClick:a.activateEditMode},"-",a.props.task.title,", "),r.a.createElement("span",null,"priority:",a.state.editPriorityMode?r.a.createElement("select",{autoFocus:!0,value:a.props.task.priority,size:1,onBlur:function(){return a.setState({editPriorityMode:!1})},onChange:a.onPriorityChanged},r.a.createElement("option",{value:0},"low"),r.a.createElement("option",{value:1},"middle"),r.a.createElement("option",{value:2},"hi"),r.a.createElement("option",{value:3},"urgently"),r.a.createElement("option",{value:4},"later")):r.a.createElement("span",{onClick:function(){return a.setState({editPriorityMode:!0})}},e))),r.a.createElement("button",{className:"deleterTask",onClick:a.onClickClose},"x")))},a}return Object(F.a)(t,e),t}(r.a.Component),te=function(e){function t(){var e,a;Object(R.a)(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(a=Object(_.a)(this,(e=Object(M.a)(t)).call.apply(e,[this].concat(o)))).render=function(){var e=a.props.tasks.map(function(e){return r.a.createElement(ee,{key:e.id,deleteTask:a.props.deleteTask,changeTitle:a.props.changeTitle,changeStatus:a.props.changeStatus,changePriority:a.props.changePriority,task:e})});return r.a.createElement("div",{className:"todoList-tasks"},e)},a}return Object(F.a)(t,e),t}(r.a.Component),ae=function(e){function t(){var e,a;Object(R.a)(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(a=Object(_.a)(this,(e=Object(M.a)(t)).call.apply(e,[this].concat(o)))).state={isHidden:!1},a.onAllFilterClick=function(){a.props.changeFilter("All")},a.onCompletedFilterClick=function(){a.props.changeFilter("Completed")},a.onActiveFilterClick=function(){a.props.changeFilter("Active")},a.onShowFiltersClick=function(){a.setState({isHidden:!1})},a.onHideFiltersClick=function(){a.setState({isHidden:!0})},a.render=function(){var e="All"===a.props.filterValue?"filter-active":"",t="Completed"===a.props.filterValue?"filter-active":"",n="Active"===a.props.filterValue?"filter-active":"";return r.a.createElement("div",{className:""},r.a.createElement("div",{className:"todoList-footer"},!a.state.isHidden&&r.a.createElement("span",{onClick:a.onHideFiltersClick},"hide"),a.state.isHidden&&r.a.createElement("span",{onClick:a.onShowFiltersClick},"show"),!a.state.isHidden&&r.a.createElement("div",null,r.a.createElement("button",{onClick:a.onAllFilterClick,className:e},"All"),r.a.createElement("button",{onClick:a.onCompletedFilterClick,className:t},"Completed"),r.a.createElement("button",{onClick:a.onActiveFilterClick,className:n},"Active"))))},a}return Object(F.a)(t,e),t}(r.a.Component),ne=function(e){function t(){var e,a;Object(R.a)(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(a=Object(_.a)(this,(e=Object(M.a)(t)).call.apply(e,[this].concat(o)))).state={editMode:!1,memoryTitle:"",editPriorityMode:!1},a.activateEditMode=function(){a.setState({editMode:!0,memoryTitle:a.props.title})},a.deActivateEditMode=function(){a.props.changeTodoTitle(a.props.id,a.state.memoryTitle),a.setState({editMode:!1})},a.onTitleChanged=function(e){a.setState({memoryTitle:e.currentTarget.value})},a.render=function(){return r.a.createElement(r.a.Fragment,null,a.state.editMode?r.a.createElement("input",{onBlur:a.deActivateEditMode,onChange:a.onTitleChanged,value:a.state.memoryTitle,autoFocus:!0}):r.a.createElement("h3",{onClick:a.activateEditMode,className:"todoList-header__title"},a.props.title))},a}return Object(F.a)(t,e),t}(r.a.Component),re=a(111),oe=a.n(re),ie=function(e){return r.a.createElement(r.a.Fragment,null,e.isPreloader&&r.a.createElement("div",null,r.a.createElement("img",{src:oe.a,alt:""})))},ce=function(e){function t(){var e,a;Object(R.a)(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(a=Object(_.a)(this,(e=Object(M.a)(t)).call.apply(e,[this].concat(o)))).restoreState=function(){a.props.getTasks(a.props.id)},a.state={tasks:[],filterValue:"All"},a.deleteTodolist=function(){a.props.deleteTodolist(a.props.id)},a.changeTodoTitle=function(e,t){a.props.changeTodolist(e,t)},a.addTask=function(e){a.props.addTask(a.props.id,e)},a.deleteTask=function(e){a.props.deleteTask(a.props.id,e)},a.changeFilter=function(e){a.setState({filterValue:e})},a.changeTask=function(e,t){a.props.changeTask(e,t)},a.changeStatus=function(e,t){a.changeTask(e,{status:t})},a.changeTitle=function(e,t){a.changeTask(e,{title:t})},a.changePriority=function(e,t){a.changeTask(e,{priority:t})},a.render=function(){var e=a.props.tasks,t=void 0===e?[]:e;return r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"todoList"},r.a.createElement("div",{className:"todoList-header"},r.a.createElement(ne,{title:a.props.title,id:a.props.id,changeTodoTitle:a.changeTodoTitle}),r.a.createElement("div",null,r.a.createElement("span",{className:"idTodo"},"# ".concat(a.props.id.slice(0,4))),r.a.createElement("button",{className:"deleterTodo",onClick:a.deleteTodolist},"x")),r.a.createElement(X,{addItem:a.addTask})),r.a.createElement(ie,{isPreloader:a.props.isPreloaderTasks}),r.a.createElement(te,{deleteTask:a.deleteTask,changeTitle:a.changeTitle,changeStatus:a.changeStatus,changePriority:a.changePriority,tasks:t.filter(function(e){switch(a.state.filterValue){case"All":return!0;case"Completed":return 2===e.status;case"Active":return 0===e.status;default:return!0}})}),r.a.createElement(ae,{changeFilter:a.changeFilter,filterValue:a.state.filterValue})))},a}return Object(F.a)(t,e),Object(Q.a)(t,[{key:"componentDidMount",value:function(){this.restoreState()}}]),t}(r.a.Component),se=Object(c.b)(function(e){return{isPreloaderTasks:e.todoPage.isPreloaderTasks}},{deleteTodolist:function(e){return function(t){f.deleteTodolist(e).then(function(a){0===a.data.resultCode&&t({type:"TodoList/Reducer/DELETE-TODOLIST",todolistId:e})})}},changeTodolist:function(e,t){return function(a){f.changeTodoTitle(e,t).then(function(n){0===n.data.resultCode&&a(function(e,t){return{type:"TodoList/Reducer/CHANGE_TODOLIST",todolistId:e,title:t}}(e,t))})}},getTasks:function(e){return function(t){t(E(!0)),f.getTasks(e).then(function(a){console.log(a),a.data.error||(t(function(e,t){return{type:"SET_TASKS",tasks:e,todoListId:t}}(a.data.items,e)),t(E(!1)))})}},addTask:function(e,t){return function(a){f.createTask(e,t).then(function(t){if(0===t.data.resultCode){var n=t.data.data.item;a(function(e,t){return{type:h,todolistId:e,newTask:t}}(e,n))}})}},deleteTask:function(e,t){return function(a){f.deleteTask(e,t).then(function(n){0===n.data.resultCode&&a(function(e,t){return{type:"TodoList/Reducer/DELETE-TASK",todolistId:e,taskId:t}}(e,t))})}},changeTask:function(e,t){return function(a){f.changeTask(e,t).then(function(e){0===e.data.resultCode&&a({type:"TodoList/Reducer/CHANGE_TASK",task:e.data.data.item})})}}})(ce),le=function(e){function t(){var e,a;Object(R.a)(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(a=Object(_.a)(this,(e=Object(M.a)(t)).call.apply(e,[this].concat(o)))).componentDidMount=function(){a.restoreState()},a.restoreState=function(){a.props.getTodolists()},a.addTodoList=function(e){a.props.addTodoList(e)},a.render=function(){var e=a.props.todolists.map(function(e){return r.a.createElement(se,{key:e.id,id:e.id,title:e.title,tasks:e.tasks})});return r.a.createElement("div",null,r.a.createElement(ie,{isPreloader:a.props.isPreloaderTodo}),r.a.createElement("div",null,r.a.createElement(X,{addItem:a.addTodoList})),r.a.createElement("div",{className:"App"},e))},a}return Object(F.a)(t,e),t}(r.a.Component),de=Object(c.b)(function(e){return{todolists:e.todoPage.todolists,isPreloaderTodo:e.todoPage.isPreloaderTodo,isAuth:e.auth.isAuth}},{addTodoList:function(e){return function(t){f.createTodolist(e).then(function(e){0===e.data.resultCode&&t({type:"TodoList/Reducer/ADD_TODOLIST",newTodolistName:e.data.data.item})})}},getTodolists:function(){return function(e){e(b(!0)),f.getTodolists().then(function(t){e({type:"SET_TODOLISTS",todolists:t.data}),e(b(!1))})}}})(le),ue=function(e){function t(){var e,a;Object(R.a)(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(a=Object(_.a)(this,(e=Object(M.a)(t)).call.apply(e,[this].concat(o)))).componentDidMount=function(){a.props.Autorization()},a.render=function(){return r.a.createElement("div",{style:{backgroundImage:"url(https://ismile-service.ru/images/bg20.jpg)"}},r.a.createElement(H,null),r.a.createElement("div",{style:{minHeight:"80vh"}},r.a.createElement(K.b,{path:"/login",component:q}),r.a.createElement(K.b,{path:"/",render:function(){return a.props.isAuth?r.a.createElement(de,null):r.a.createElement(K.a,{to:"/login"})}})))},a}return Object(F.a)(t,e),t}(r.a.Component),pe=Object(c.b)(function(e){return{isAuth:e.auth.isAuth}},{Autorization:I})(ue);i.a.render(r.a.createElement(c.a,{store:D},r.a.createElement(N.a,{basename:"/todolist_typescript"},r.a.createElement(pe,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},68:function(e,t,a){}},[[113,1,2]]]);
//# sourceMappingURL=main.3f342145.chunk.js.map